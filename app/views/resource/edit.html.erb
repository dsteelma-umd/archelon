<div id="error_explanation">
</div>

<h1><%= @page_title %></h1>

<%= form_with(id: 'resource_edit_form') do %>
  <%
    content_model = @resource[:content_model]
    items = @resource[:items]
  %>

  <% unless content_model[:required].empty? %>
    <h2>Required Fields</h2>
    <%= render 'metadata_edit_components', fields: content_model[:required], items: items, uri: @id %>
  <% end %>

  <% unless content_model[:recommended].empty? %>
    <h2>Recommended Fields</h2>
    <%= render 'metadata_edit_components', fields: content_model[:recommended], items: items, uri: @id %>
  <% end %>

  <% unless content_model[:optional].empty? %>
    <h2>Optional Fields</h2>
    <%= render 'metadata_edit_components', fields: content_model[:optional], items: items, uri: @id %>
  <% end %>

  <div class="form-group">
    <input id="resource_form_submit" type="submit" name="submit" value="Submit" class="btn btn-primary form-control" />
    <%= link_to 'Cancel', solr_document_path(id: @id), class: 'btn btn-danger form-control' %>
  </div>
<% end %>

<hr>

<h2>Other form</h2>
<%
  content_model = @resource[:content_model]
  items = @resource[:items]
%>

<% required_components = define_react_components(content_model[:required], items, @id) %>
<% recommended_components = define_react_components(content_model[:recommended], items, @id) %>
<% optional_components = define_react_components(content_model[:optional], items, @id) %>

<%= react_component("Form", {
  required_components: required_components,
  recommended_components: recommended_components,
  optional_components: optional_components,
  cancel_url: solr_document_path(id: @id) }) %>
